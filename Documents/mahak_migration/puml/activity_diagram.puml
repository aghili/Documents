@startuml
' 3. Activity Diagram â€“ Complete Invoice Issuing Process
start

:User opens Invoice form;
:Enter items, quantities, prices;
:Apply line/group/discount;
:Calculate totals;

if (Payment type?) then (Cash/Card)
  :Register payment immediately
else (Credit/Check/Installment)
  :Select payment terms
endif

:Save invoice locally;
:Auto-create accounting document;
:System generates Journal Entries;

if (Send to Mahak Web Service enabled?) then (Yes)
  :Call MahakWebServiceClient.SendInvoice()
  if (API response OK?) then (Yes)
    :Show Remote Invoice ID
    :Log success in WebServiceLog
  else (No)
    :Show error + Queue for retry
    :Log failure
  endif
else (No)
endif

:Print invoice / receipt;
stop
@enduml