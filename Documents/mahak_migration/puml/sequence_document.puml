@startuml
' 3. Sequence â€“ Auto-create Accounting Document
participant VM as "InvoiceViewModel"
participant IS as "InvoiceService"
participant AS as "AccountingService"
participant DB as "DbContext"

VM -> IS: SaveInvoice()
activate IS
IS -> AS: CreateDocumentFromInvoice()
activate AS
AS -> AS: Calculate Debit/Credit entries
AS -> DB: Add(Document + JournalEntries)
activate DB
DB --> AS: SaveChanges()
deactivate DB
AS --> IS: DocumentId
deactivate AS
IS --> VM: Success + DocumentId
deactivate IS
@enduml